{% extends 'base.html' %}{% load static %}
{% block body_block %}

<form id='post-form' action="" method="post" enctype="multipart/form-data">
    {% csrf_token %}
    {{ form.as_p }}
    <input class="btn btn-danger rounded-0" type="submit" value="Post">
</form>

{% for feed in feeds %}
    <div class="pt-1">
    <div class="post-card card col-lg-5 col-md-8 col-sm-10 mx-auto mb-3">
        <div class="card-header row">
            <div class='col-2' style='padding:0.2rem'><img class="rounded-circle img-fluid" src="{{ feed.author.profile.profile_photo.url }}" alt="userimg"></div>
            <div class='col-10 row'><strong>{{ feed.author.first_name }} {{ feed.author.last_name }}</strong></div>
        </div>
        <p class="caption">{{feed.content}}</p>
        <a href="{% url 'post:feed_detail' pk=feed.id %}">
            <img src="{{ feed.image.url }}" class="card-img-top" alt="...">
        </a>
        <div class="card-body">
            <div class="text-center row mb-2">
                <a href="#" pid="{{ feed.id }}" class="col-6 like" url="{% url 'post:toggle_like_post' %}"><i class="fa fa-thumbs-up"></i> Like</a>
                <a href="#" class="col-6"><i class="fa fa-comment"></i> Comment</a>
            </div>
            <div class="row">
                <small class="col-6">{% if feed.likes.all.count == 1 %}{{ feed.likes.all.count }} Like{% else %}{{ feed.likes.all.count }} Likes{% endif %} , 
                    {% if feed.comment_set.all.count == 1 %}{{ feed.comment_set.all.count }} Comment{% else %}{{ feed.comment_set.all.count }} Comments{% endif %}
                </small>
                <small class="col-6 text-right">{{feed.date}}</small>
            </div>
        </div>
    </div>
</div>
{% endfor %}

{% endblock body_block %}

{% block script_block %}
<script src="{% static 'js/feed.js' %}"></script>
<script src="{% static 'js/post_like.js' %}"></script>
{% endblock script_block %}
